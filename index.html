
<head>
    <meta charset="utf-8" />
    <meta name="description" content="TimelineJS Embed">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>南一歷史年表</title>
    <link title="timeline-styles" rel="stylesheet"
          href="css/timeline.css">
    <script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
</head>
<body>
<div id='timeline-embed' style="width: 100%;height: 100%"></div>
</body>
<script>
var options = {
    width:              '100%',
    height:             '2000',
    initial_zoom:       10,
    hash_bookmark:      true,
    ga_measurement_id:  'G-FREF74HEZH'
}
var timeline = new TL.Timeline('timeline-embed',
'https://docs.google.com/spreadsheets/d/1eXbsfBkNOMtNTGhHy8n1BkHhhtQg_6GH8X2RESWX8Ak/edit#gid',
    options);

function setGroupColor(groups, keyword, color) {
    var keywordGroups = groups.filter(function (group) {
        var message = group.querySelector('.tl-timegroup-message');
        return message && message.textContent.includes(keyword);
    });

    keywordGroups.forEach(function (group) {
        group.style.backgroundColor = color;
    });
}

// Check every second for tl-timegroup elements
var checkExist = setInterval(function() {
    var allTimeGroups = Array.from(document.querySelectorAll('.tl-timegroup'));
    if (allTimeGroups.length) {
        // If tl-timegroup elements exist, set their color
        setGroupColor(allTimeGroups, '世界', '#98D2EB');
        setGroupColor(allTimeGroups, '臺灣', '#D6BA73');
        setGroupColor(allTimeGroups, '東亞', '#DDA3B2');

        // Stop checking
        clearInterval(checkExist);
    }
}, 1000); // check every 1000ms
</script>
